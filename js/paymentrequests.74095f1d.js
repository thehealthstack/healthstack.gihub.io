(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["paymentrequests"],{"0d6e":function(t,e,s){"use strict";var a=s("db2f"),n=s.n(a);n.a},"1c11":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("table",{staticClass:"table is-fullwidth"},[t._m(0),s("tbody",t._l(t.labRequests,(function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(t.formatTime(e.order_time)))]),s("td",{staticClass:"is-capitalized"},[t._v("\n          "+t._s(e.patient.first_name+" "+e.patient.last_name)+"\n        ")]),s("td",[t._v(t._s(t.type(e)))]),s("td",[t._v(t._s(e.total_cost))]),s("td",[s("a",{staticClass:"button is-link is-expandible",on:{click:function(s){return t.activateModal(e)}}},[t._m(1,!0),s("span",[t._v("Checkout lab request")])])])])})),0)]),s("labrequestcheckout-component")],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Time")]),s("th",[t._v("Customer")]),s("th",[t._v("Type")]),s("th",[t._v("Total")]),s("th",[t._v("Action")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon"},[s("i",{staticClass:"fas fa-shopping-cart"})])}],i=(s("55dd"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.labRequest?s("div",{staticClass:"modal",class:{"is-active":t.active}},[s("div",{staticClass:"modal-background"}),s("div",{staticClass:"modal-card"},[s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title"},[t._v("Patient: "+t._s(t.labRequest.patient.first_name+" "+t.labRequest.patient.last_name))]),s("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.closeModal}})]),s("section",{staticClass:"modal-card-body"},[s("div",{staticClass:"box"},[s("div",{staticClass:"field has-addons has-addons-centered"},[t._m(0),s("p",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.amountPaid,expression:"amountPaid",modifiers:{number:!0}}],staticClass:"input is-link",attrs:{type:"text",placeholder:"Amount"},domProps:{value:t.amountPaid},on:{input:function(e){e.target.composing||(t.amountPaid=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),s("div",[s("div",{staticClass:"level"},[t._m(1),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("p",{staticClass:"is-size-5 has-text-right"},[t._v(t._s(t.total(t.labRequest)))])])])]),s("div",{staticClass:"level"},[t._m(2),s("div",{staticClass:"level-right"},[s("div",{staticClass:"level-item"},[s("p",{staticClass:"is-size-5 has-text-right"},[t._v(t._s(t.balance(t.labRequest)))])])])])])]),s("labrequestcheckoutexam-component"),s("labrequestcheckoutvaccine-component"),s("div",{staticClass:"field is-grouped",staticStyle:{"margin-top":"1em"}},[s("div",{staticClass:"control is-expanded"},[s("button",{staticClass:"button is-link is-fullwidth is-medium",attrs:{disabled:!t.validatePaymentAmount(t.labRequest)},on:{click:function(e){return t.confirmPayment(t.labRequest)}}},[t._m(3),s("span",[t._v("Confirm")])])]),s("div",{staticClass:"control is-expanded"},[s("button",{staticClass:"button is-danger is-fullwidth is-medium is-outlined",on:{click:function(e){return t.confirmPayment(t.labRequest)}}},[t._m(4),s("span",[t._v("Delete")])])])])],1)])]):t._e()}),c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"control is-link"},[s("span",{staticClass:"select"},[s("select",[s("option",[t._v("$")])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[s("p",{staticClass:"is-size-5"},[t._v("Total:")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"level-left"},[s("div",{staticClass:"level-item"},[s("p",{staticClass:"is-size-5"},[t._v("Balance:")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-check"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"far fa-trash-alt"})])}],r=s("e1a7"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.labRequest.exams?s("div",{staticClass:"card",staticStyle:{"margin-top":"1em"}},[t._m(0),s("div",{staticStyle:{margin:"0.5em","padding-bottom":"0.5em","border-bottom":"2px solid #dbdbdb"}},[s("v-select",{attrs:{placeholder:"Add exam+",options:t.examOptions},on:{input:t.addExam},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[t.labRequestHasExams?s("table",{staticClass:"table is-fullwidth is-narrow"},[t._m(1),s("tbody",[t._l(t.labRequest.exams,(function(e,a){return s("tr",{key:a},[s("td",[s("button",{staticClass:"button is-danger is-outlined"},[s("span",{staticClass:"icon is-small",on:{click:function(s){return t.removeExam(e.name)}}},[s("i",{staticClass:"far fa-trash-alt"})])])]),s("td",[t._v(t._s(e.name))]),s("td",[s("div",{staticClass:"select"},[s("select",{on:{change:function(s){return t.addDiscount(s.target.value,e)}}},[s("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("Select discount")]),s("option",{class:{"has-text-danger":t.isExamDiscounted(e)},attrs:{disabled:!t.isExamDiscounted(e)},domProps:{value:null}},[t._v("Remove discount")]),t._l(e.discounts,(function(a,n){return s("option",{key:n,domProps:{value:t.examDiscount(e.price,a.value)}},[t._v(t._s(a.name)+": "+t._s(a.value)+"%")])}))],2)])]),s("td",{staticClass:"has-text-right"},[t._v(t._s(t.totalExamDiscount(e)))]),s("td",{staticClass:"has-text-right"},[t._v(t._s(t.totalExamCost(e)))])])})),s("tr",[t._m(2),s("td",{staticClass:"has-text-right"},[s("strong",[t._v(t._s(t.totalCost()))])])]),s("tr",[t._m(3),s("td",{staticClass:"has-text-right"},[s("strong",[t._v(t._s(t.totalDiscount()))])])]),s("tr",[t._m(4),s("td",{staticClass:"has-text-right"},[s("strong",[t._v(t._s(t.tax()))])])]),s("tr",{staticStyle:{"border-top":"2px solid #dbdbdb"}},[t._m(5),s("td",{staticClass:"has-text-right"},[s("strong",{staticClass:"has-text-link is-size-5"},[t._v(t._s(t.total()))])])])],2)]):s("div",[s("strong",[t._v("No Exam Has Been Selected")])])])])]):t._e()},u=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Exams:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th"),s("th",[t._v("Name")]),s("th",[t._v("Select Discount")]),s("th",[t._v("Discount")]),s("th",[t._v("Subtotal")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{colspan:"4"}},[s("strong",[t._v("Subtotal")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{colspan:"4"}},[s("strong",[t._v("Discount")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{colspan:"4"}},[s("strong",[t._v("Tax 15%")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{colspan:"4"}},[s("strong",[t._v("Total")])])}],l=(s("7f7f"),{name:"LabRequestCheckoutExamComponent",created:function(){var t=this.$store.state.authentication.inMemoryToken;this.$store.dispatch("fetchExams",t)},data:function(){return{amountPaid:null,selected:""}},methods:{addExam:function(t){var e=this.$store.state.cashier.currentCheckoutLabRequest;e.exams&&t&&e.exams.push(t.exam)},removeExam:function(t){for(var e=-1,s=this.$store.state.cashier.currentCheckoutLabRequest,a=0;a<s.exams.length;a++)s.exams[a].name===t&&(e=a);-1!=e&&s.exams.splice(e,1)},addDiscount:function(t,e){0===e.active_discounts.length?e.active_discounts.push(t):(e.active_discounts.pop(),null!==t&&e.active_discounts.push(t))},isExamDiscounted:function(t){return t.active_discounts.length>0},examDiscount:function(t,e){return(e/100*t).toFixed(2)},totalExamDiscount:function(t){return Object(r["f"])(t)},totalExamCost:function(t){return t.price-this.totalExamDiscount(t)},tax:function(){return Object(r["a"])(15,this.$store.state.cashier.currentCheckoutLabRequest)},totalDiscount:function(){return Object(r["d"])(this.$store.state.cashier.currentCheckoutLabRequest)},totalPrice:function(){return Object(r["e"])(this.$store.state.cashier.currentCheckoutLabRequest)},totalCost:function(){return Object(r["c"])(this.$store.state.cashier.currentCheckoutLabRequest)},total:function(){return Object(r["b"])(15,this.$store.state.cashier.currentCheckoutLabRequest)}},computed:{examOptions:function(){return this.$store.getters.examsToBeOrdered},labRequest:function(){return this.$store.state.cashier.currentCheckoutLabRequest},labRequestHasExams:function(){return this.$store.state.cashier.currentCheckoutLabRequest.exams.length>0}}}),d=l,h=s("2877"),m=Object(h["a"])(d,o,u,!1,null,null,null),v=m.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.labRequest.vaccines?s("div",{staticClass:"card",staticStyle:{"margin-top":"1em"}},[t._m(0),s("div",{staticStyle:{margin:"0.5em","padding-bottom":"0.5em","border-bottom":"2px solid #dbdbdb"}},[s("v-select",{attrs:{placeholder:"Add vaccine+",options:t.vaccineOptions},on:{input:t.addVaccine},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),s("div",{staticClass:"card-content"},[s("div",{staticClass:"content"},[t.labRequestHasVaccines?s("table",{staticClass:"table is-fullwidth"},[t._m(1),s("tbody",[t._l(t.labRequest.vaccines,(function(e,a){return s("tr",{key:a},[s("td",[s("button",{staticClass:"button is-danger is-outlined"},[s("span",{staticClass:"icon is-small",on:{click:function(s){return t.removeVaccine(e.name)}}},[s("i",{staticClass:"far fa-trash-alt"})])])]),s("td",[t._v(t._s(e.name))]),s("td",[s("div",{staticClass:"select"},[s("select",{on:{change:function(s){return t.addDiscount(s.target.value,e)}}},[s("option",{attrs:{value:"",selected:"",disabled:""}},[t._v("Select discount")]),s("option",{class:{"has-text-danger":t.isVaccineDiscounted(e)},attrs:{disabled:!t.isVaccineDiscounted(e)},domProps:{value:null}},[t._v("Remove discount")]),t._l(e.discounts,(function(a,n){return s("option",{key:n,domProps:{value:t.vaccineDiscount(e.price,a.value)}},[t._v(t._s(a.name)+": "+t._s(a.value)+"%")])}))],2)])]),s("td",{staticClass:"has-text-right"},[t._v(t._s(t.totalVaccineDiscount(e)))]),s("td",{staticClass:"has-text-right"},[t._v(t._s(t.totalVaccineCost(e)))])])})),s("tr",[t._m(2),s("td",{staticClass:"has-text-right"},[s("strong",[t._v(t._s(t.totalCost()))])])]),s("tr",[t._m(3),s("td",{staticClass:"has-text-right"},[s("strong",[t._v(t._s(t.totalDiscount()))])])]),s("tr",[t._m(4),s("td",{staticClass:"has-text-right"},[s("strong",[t._v(t._s(t.tax()))])])]),s("tr",{staticStyle:{"border-top":"2px solid #dbdbdb"}},[t._m(5),s("td",{staticClass:"has-text-right"},[s("strong",{staticClass:"has-text-link is-size-5"},[t._v(t._s(t.total()))])])])],2)]):s("div",[s("strong",[t._v("No Vaccine Has Been Selected")])])])])]):t._e()},_=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[t._v("Vaccines:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th"),s("th",[t._v("Name")]),s("th",[t._v("Select Discount")]),s("th",[t._v("Discount")]),s("th",[t._v("Subtotal")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{colspan:"4"}},[s("strong",[t._v("Subtotal")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{colspan:"4"}},[s("strong",[t._v("Discount")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{colspan:"4"}},[s("strong",[t._v("Tax 15%")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{colspan:"4"}},[s("strong",[t._v("Total")])])}],p={name:"LabRequestCheckoutVaccineComponent",created:function(){var t=this.$store.state.authentication.inMemoryToken;this.$store.dispatch("fetchVaccines",t)},data:function(){return{amountPaid:null,selected:""}},methods:{addVaccine:function(t){var e=this.$store.state.cashier.currentCheckoutLabRequest;t&&e.vaccines.push(t.vaccine)},removeVaccine:function(t){for(var e=-1,s=this.$store.state.cashier.currentCheckoutLabRequest,a=0;a<s.vaccines.length;a++)s.vaccines[a].name===t&&(e=a);-1!=e&&this.labRequest.vaccines.splice(e,1)},addDiscount:function(t,e){0===e.active_discounts.length?e.active_discounts.push(t):(e.active_discounts.pop(),null!==t&&e.active_discounts.push(t))},isVaccineDiscounted:function(t){return t.active_discounts.length>0},vaccineDiscount:function(t,e){return(e/100*t).toFixed(2)},totalVaccineDiscount:function(t){return Object(r["f"])(t)},totalVaccineCost:function(t){return(t.price-this.totalVaccineDiscount(t)).toFixed(2)},tax:function(){return Object(r["a"])(15,this.$store.state.cashier.currentCheckoutLabRequest)},totalDiscount:function(){return Object(r["d"])(this.$store.state.cashier.currentCheckoutLabRequest)},totalPrice:function(){return Object(r["e"])(this.$store.state.cashier.currentCheckoutLabRequest)},totalCost:function(){return Object(r["c"])(this.$store.state.cashier.currentCheckoutLabRequest)},total:function(){return Object(r["b"])(15,this.$store.state.cashier.currentCheckoutLabRequest)}},computed:{labRequest:function(){return this.$store.state.cashier.currentCheckoutLabRequest},labRequestHasVaccines:function(){return this.$store.state.cashier.currentCheckoutLabRequest.vaccines.length>0},vaccineOptions:function(){return this.$store.getters.vaccinesToBeOrdered}}},b=p,C=Object(h["a"])(b,f,_,!1,null,null,null),x=C.exports,g={created:function(){var t=this.$store.state.authentication.inMemoryToken;this.$store.dispatch("fetchExams",t),this.$store.dispatch("fetchVaccines",t)},name:"LabRequestCheckoutComponent",data:function(){return{amountPaid:null,selected:""}},methods:{validatePaymentAmount:function(t){return null!=this.amountPaid&&this.balance(t)>=0},balance:function(t){return(this.amountPaid?this.amountPaid-Object(r["b"])(15,t):0).toFixed(2)},total:function(t){return Object(r["b"])(15,t)},closeModal:function(){this.$store.dispatch("toggleLabRequestCheckoutModalOn",!1),this.$store.dispatch("updateCurrentCheckoutLabRequest",null),this.amountPaid=null},confirmPayment:function(t){t.status="paid",t.users.push(this.$store.state.authentication.currentUser),t.updated_at=Date.now(),this.generateTransaction(t),this.$socket.emit("update-labrequest",t),this.closeModal()},generateTransaction:function(t){var e={lab_request:t.key,users:[this.$store.state.authentication.currentUser],patient:t.patient,total_cost:Object(r["b"])(15,t),amount_paid:this.amountPaid,payment_method:"cash",balance:this.balance(t),status:"paid",key:Object(r["g"])(),type:"transaction",created_at:Date.now(),updated_at:Date.now()};this.$socket.emit("create-transaction",e)}},computed:{active:function(){return this.$store.state.cashier.isLabRequestCheckoutModalOn},labRequest:function(){return this.$store.state.cashier.currentCheckoutLabRequest}},components:{"labrequestcheckoutexam-component":v,"labrequestcheckoutvaccine-component":x}},$=g,k=(s("0d6e"),Object(h["a"])($,i,c,!1,null,"31c63c91",null)),q=k.exports,R={name:"PaymentRequestListingComponent",created:function(){this.$store.dispatch("fetchLabRequests",this.$store.state.authentication.inMemoryToken);var t=this.$store;this.$socket.on("create-labrequest",(function(e){t.dispatch("addLabRequest",e)}))},methods:{activateModal:function(t){this.$store.dispatch("toggleLabRequestCheckoutModalOn",!0),this.$store.dispatch("updateCurrentCheckoutLabRequest",t)},formatTime:function(t){var e=new Date(t);return e.toLocaleString()},type:function(t){return t.partnerlab?"PARTNER EXAM":t.exams?"EXAM":"VACCINE"}},computed:{labRequests:function(){return this.$store.getters.createdLabRequested.sort((function(t,e){return t.order_time<t.order_time?-1:t.order_time>e.order_time?1:0}))}},components:{"labrequestcheckout-component":q}},y=R,E=Object(h["a"])(y,a,n,!1,null,null,null);e["default"]=E.exports},2366:function(t,e){for(var s=[],a=0;a<256;++a)s[a]=(a+256).toString(16).substr(1);function n(t,e){var a=e||0,n=s;return[n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],"-",n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]],n[t[a++]]].join("")}t.exports=n},"2f21":function(t,e,s){"use strict";var a=s("79e5");t.exports=function(t,e){return!!t&&a((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"55dd":function(t,e,s){"use strict";var a=s("5ca1"),n=s("d8e8"),i=s("4bf8"),c=s("79e5"),r=[].sort,o=[1,2,3];a(a.P+a.F*(c((function(){o.sort(void 0)}))||!c((function(){o.sort(null)}))||!s("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(i(this)):r.call(i(this),n(t))}})},c64e:function(t,e,s){var a=s("e1f4"),n=s("2366");function i(t,e,s){var i=e&&s||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var c=t.random||(t.rng||a)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,e)for(var r=0;r<16;++r)e[i+r]=c[r];return e||n(c)}t.exports=i},db2f:function(t,e,s){},e1a7:function(t,e,s){"use strict";s.d(e,"g",(function(){return i})),s.d(e,"f",(function(){return c})),s.d(e,"e",(function(){return o})),s.d(e,"c",(function(){return u})),s.d(e,"a",(function(){return l})),s.d(e,"d",(function(){return r})),s.d(e,"b",(function(){return d}));var a=s("c64e"),n=s.n(a),i=function(){return n()()},c=function(t){return t.active_discounts.length<=0?0:t.active_discounts.reduce((function(t,e){return t+e}),0)},r=function(t){var e=t.exams?t.exams:t.vaccines;return e?e.reduce((function(t,e){return t+parseFloat(c(e))}),0).toFixed(2):0},o=function(t){var e=t.exams?t.exams:t.vaccines;return e?e.reduce((function(t,e){return t+e.price}),0):0},u=function(t){return(o(t)-r(t)).toFixed(2)},l=function(t,e){return(t/100*u(e)).toFixed(2)},d=function(t,e){return(parseFloat(u(e))+parseFloat(l(t,e))).toFixed(2)}},e1f4:function(t,e){var s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(s){var a=new Uint8Array(16);t.exports=function(){return s(a),a}}else{var n=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}}}]);
//# sourceMappingURL=paymentrequests.74095f1d.js.map