(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["patientregistration"],{2366:function(t,e){for(var a=[],s=0;s<256;++s)a[s]=(s+256).toString(16).substr(1);function i(t,e){var s=e||0,i=a;return[i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]]].join("")}t.exports=i},"5e29":function(t,e,a){},"80ed":function(t,e,a){},c05b:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("a",{staticClass:"button is-link is-expandible",on:{click:t.createPatient}},[t._m(0),a("span",[t._v("Register New Patient")])])]),a("div",{staticClass:"level-right"},[a("searchbar-component")],1)]),a("table",{staticClass:"table is-fullwidth"},[t._m(1),a("tbody",t._l(t.patients,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"is-capitalized"},[t._v(t._s(e.first_name))]),a("td",{staticClass:"is-capitalized"},[t._v(t._s(e.last_name))]),a("td",[t._v(t._s(e.email))]),a("td",[t._v(t._s(e.telephone))]),a("td",[t._v(t._s(e.sex))]),a("td",[t._v(t._s(e.age))]),a("td",[a("button",{staticClass:"button is-link",on:{click:function(a){return t.activateModal(e)}}},[a("span",[t._v("Order Test ")])])]),a("td",[a("button",{staticClass:"button is-link",on:{click:function(a){return t.activateVaccineModal(e)}}},[a("span",[t._v("Order Vaccine ")])])])])})),0)]),a("testordering-component"),a("vaccineordering-component"),a("createpatient-component")],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-user-plus"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("First Name")]),a("th",[t._v("Last Name")]),a("th",[t._v("Email")]),a("th",[t._v("Telephone No.")]),a("th",[t._v("Sex")]),a("th",[t._v("Age")]),a("th",[t._v("Actions")]),a("th")])])}],n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"field has-addons"},[a("p",{staticClass:"control"},[a("span",{staticClass:"select"},[a("select",[a("option",{attrs:{selected:"",disabled:""}},[t._v("Search By")]),a("option",[t._v("Fist Name")]),a("option",[t._v("Last Name")]),a("option",[t._v("Email")]),a("option",[t._v("Phone Number")])])])]),a("p",{staticClass:"control is-expanded"},[a("input",{staticClass:"input",attrs:{type:"text",placeholder:"Find a patient record..."}})]),a("p",{staticClass:"control"},[a("a",{staticClass:"button is-link"},[t._v("Search")])])])])}],o={name:"PatientSearchComponent"},c=o,l=a("2877"),d=Object(l["a"])(c,n,r,!1,null,null,null),u=d.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal",class:{"is-active":t.active}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v("Register New Patient")]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.closeModal}})]),a("div",[a("form",{ref:"newPatientForm",on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"field is-grouped is-grouped-multiline"},[a("div",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"input",attrs:{type:"text",placeholder:"First Name",required:""},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}})]),a("div",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"input",attrs:{type:"text",placeholder:"Last Name",required:""},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control has-icons-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"email",placeholder:"Email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._m(0)])]),a("div",{staticClass:"field is-expanded"},[a("div",{staticClass:"field has-addons"},[t._m(1),a("p",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.telephone,expression:"telephone"}],staticClass:"input",attrs:{type:"tel",placeholder:"Phone Number",required:""},domProps:{value:t.telephone},on:{input:function(e){e.target.composing||(t.telephone=e.target.value)}}})])])]),a("div",{staticClass:"field is-grouped is-grouped-multiline"},[a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.sex,expression:"sex"}],attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sex=e.target.multiple?a:a[0]}}},[a("option",{attrs:{selected:"",disabled:"",value:""}},[t._v("Sex")]),a("option",[t._v("Male")]),a("option",[t._v("Female")])])])]),a("div",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.age,expression:"age",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",placeholder:"Age",number:"",required:""},domProps:{value:t.age},on:{input:function(e){e.target.composing||(t.age=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])])]),a("footer",{staticClass:"modal-card-foot"},[a("input",{staticClass:"button is-link is-fullwidth is-medium",attrs:{type:"submit",value:"Save Patient",disabled:!t.isFormValid}})])])])])])},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fas fa-envelope"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"control"},[a("a",{staticClass:"button is-static"},[t._v("\n                  +237\n                ")])])}],v=a("e1a7"),h={name:"CreatePatientComponent",data:function(){return{firstName:null,lastName:null,email:null,telephone:null,sex:"",age:null}},methods:{closeModal:function(){this.$store.dispatch("toggleCreatePatientModalOn",!1)},validateForm:function(){return this.firstName&&this.lastName&&this.email&&this.telephone&&this.sex&&this.age},refreshForm:function(){this.firstName=null,this.lastName=null,this.email=null,this.telephone=null,this.sex="",this.age=null},submitForm:function(){if(this.validateForm){var t={first_name:this.firstName,last_name:this.lastName,email:this.email,telephone:this.telephone,age:this.age,sex:this.sex,type:"patient",key:Object(v["g"])(),created_at:Date.now(),updated_at:Date.now()};this.$socket.emit("create-patient",t),this.closeModal(),this.refreshForm()}}},computed:{active:function(){return this.$store.state.receptionist.isCreatePatientModalOn},isFormValid:function(){return this.validateForm()}}},f=h,_=Object(l["a"])(f,m,p,!1,null,null,null),C=_.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal",class:{"is-active":t.active}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[t.patient?a("p",{staticClass:"modal-card-title"},[t._v("\n        Patient: "+t._s(t.patient.first_name+" "+t.patient.last_name)+"\n      ")]):t._e(),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.closeModal}})]),a("section",{staticClass:"modal-card-body"},[a("div",[a("div",{staticClass:"card"},[t._m(0),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.doctorFullName,expression:"doctorFullName"}],staticClass:"input",attrs:{type:"text",placeholder:"Full Name"},domProps:{value:t.doctorFullName},on:{input:function(e){e.target.composing||(t.doctorFullName=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.doctorEmail,expression:"doctorEmail"}],staticClass:"input",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.doctorEmail},on:{input:function(e){e.target.composing||(t.doctorEmail=e.target.value)}}})])]),a("div",{staticClass:"field is-expanded"},[a("div",{staticClass:"field has-addons"},[t._m(1),a("p",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.doctorTelephone,expression:"doctorTelephone"}],staticClass:"input",attrs:{type:"tel",placeholder:"Phone Number",required:""},domProps:{value:t.doctorTelephone},on:{input:function(e){e.target.composing||(t.doctorTelephone=e.target.value)}}})])])])])])]),a("div",{staticClass:"card",staticStyle:{"margin-top":"1em"}},[t._m(2),a("div",{staticStyle:{margin:"0.5em","padding-bottom":"0.5em","border-bottom":"2px solid #dbdbdb"}},[a("v-select",{attrs:{placeholder:"Add exam+",options:t.examOptions},on:{input:t.selectExam},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),a("div",{staticClass:"card-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isTestOrdered,expression:"isTestOrdered"}]},[a("table",{staticClass:"table is-fullwidth"},[t._m(3),a("tbody",t._l(t.orderedExams,(function(e,s){return a("tr",{key:s},[a("td",[a("button",{staticClass:"button is-danger is-outlined",on:{click:function(a){return t.removeExam(e.name)}}},[t._m(4,!0)])]),a("td",[t._v(t._s(e.name))])])})),0)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isTestOrdered,expression:"!isTestOrdered"}]},[a("strong",[t._v("No Exam Has Been Selected")])])])]),a("div",{staticStyle:{"margin-top":"15px"}},[a("button",{staticClass:"button is-link is-fullwidth is-large",attrs:{disabled:t.isFormReady},on:{click:t.submitOrder}},[t._v("\n            Submit\n          ")])])])])])])},b=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v("Doctor's Details:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"control"},[a("a",{staticClass:"button is-static"},[t._v("+237")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v("Exams:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th"),a("th",[t._v("Test Name")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"far fa-trash-alt"})])}],x=(a("7f7f"),{name:"TestOrderingComponent",data:function(){return{doctorFullName:null,doctorEmail:null,doctorTelephone:null,exams:[],orderedExams:[],selected:""}},created:function(){this.$store.dispatch("fetchExams",this.$store.state.authentication.inMemoryToken)},methods:{closeModal:function(){this.$store.dispatch("toggleCreateTestModalOn",!1),this.$store.dispatch("updateActivePatient",null)},validateOrder:function(){return this.doctorFullName&&this.doctorEmail&&this.doctorTelephone&&this.isTestOrdered},refreshForm:function(){this.doctorFullName=null,this.doctorEmail=null,this.doctorTelephone=null,this.exams=[],this.orderedExams=[],this.selected=""},submitOrder:function(){var t={exams:this.orderedExams,patient:this.$store.state.receptionist.activePatient,doctor:{name:this.doctorFullName,email:this.doctorEmail,telephone:this.doctorTelephone},users:[this.$store.state.authentication.currentUser],status:"created",created_at:Date.now(),updated_at:Date.now(),order_time:Date.now(),key:Object(v["g"])(),type:"labrequest"};t.total_cost=Object(v["c"])(t),this.validateOrder()&&(this.$socket.emit("create-labrequest",t),this.closeModal(),this.refreshForm())},selectExam:function(t){t&&this.orderedExams.push(t.exam)},removeExam:function(t){for(var e=-1,a=0;a<this.orderedExams.length;a++)this.orderedExams[a].name===t&&(e=a);-1!=e&&this.orderedExams.splice(e,1)}},computed:{active:function(){return this.$store.state.receptionist.isCreateTestModalOn},isTestOrdered:function(){return this.orderedExams.length>=1},isFormReady:function(){return!this.validateOrder()},examOptions:function(){return this.$store.getters.examsToBeOrdered},patient:function(){return this.$store.state.receptionist.activePatient}}}),N=x,O=(a("d97f"),Object(l["a"])(N,g,b,!1,null,"23a626d0",null)),y=O.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal",class:{"is-active":t.active}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[t.patient?a("p",{staticClass:"modal-card-title"},[t._v("Patient: "+t._s(t.patient.first_name+" "+t.patient.last_name))]):t._e(),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.closeModal}})]),a("section",{staticClass:"modal-card-body"},[a("div",[a("div",{staticClass:"card"},[t._m(0),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.doctorFullName,expression:"doctorFullName"}],staticClass:"input",attrs:{type:"text",placeholder:"Full Name"},domProps:{value:t.doctorFullName},on:{input:function(e){e.target.composing||(t.doctorFullName=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.doctorEmail,expression:"doctorEmail"}],staticClass:"input",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.doctorEmail},on:{input:function(e){e.target.composing||(t.doctorEmail=e.target.value)}}})])]),a("div",{staticClass:"field is-expanded"},[a("div",{staticClass:"field has-addons"},[t._m(1),a("p",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.doctorTelephone,expression:"doctorTelephone"}],staticClass:"input",attrs:{type:"tel",placeholder:"Phone Number",required:""},domProps:{value:t.doctorTelephone},on:{input:function(e){e.target.composing||(t.doctorTelephone=e.target.value)}}})])])])])])]),a("div",{staticClass:"card",staticStyle:{"margin-top":"1em"}},[t._m(2),a("div",{staticStyle:{margin:"0.5em","padding-bottom":"0.5em","border-bottom":"2px solid #dbdbdb"}},[a("v-select",{attrs:{placeholder:"Add vaccine+",options:t.vaccineOptions},on:{input:t.addVaccine},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),a("div",{staticClass:"card-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isVaccineOrdered,expression:"isVaccineOrdered"}]},[a("table",{staticClass:"table is-fullwidth"},[t._m(3),a("tbody",t._l(t.vaccinesOrdered,(function(e,s){return a("tr",{key:s},[a("button",{staticClass:"button is-danger is-outlined",on:{click:function(a){return t.removeVaccine(e.name)}}},[t._m(4,!0)]),a("td",[t._v(t._s(e.name))])])})),0)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isVaccineOrdered,expression:"!isVaccineOrdered"}]},[a("strong",[t._v("No Vaccine Has Been Selected")])])])]),a("div",{staticStyle:{"margin-top":"15px"}},[a("button",{staticClass:"button is-link is-fullwidth is-large",attrs:{disabled:t.isFormReady},on:{click:t.submitOrder}},[t._v("Submit")])])])])])])},$=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v("Doctor's Details:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"control"},[a("a",{staticClass:"button is-static"},[t._v("+237")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v("Vaccines:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th"),a("th",[t._v("Test Name")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"far fa-trash-alt"})])}],w={name:"VaccineOrderingComponent",created:function(){var t=this.$store.state.authentication.inMemoryToken;this.$store.dispatch("fetchVaccines",t)},data:function(){return{doctorFullName:null,doctorEmail:null,doctorTelephone:null,vaccinesOrdered:[],selected:""}},methods:{closeModal:function(){this.$store.dispatch("toggleCreateVaccineModalOn",!1),this.$store.dispatch("updateVaccineActivePatient",null)},validateOrder:function(){return this.doctorFullName&&this.doctorEmail&&this.doctorTelephone&&this.isVaccineOrdered},refreshForm:function(){this.doctorFullName=null,this.doctorEmail=null,this.doctorTelephone=null,this.vaccinesOrdered=[],this.selected=""},submitOrder:function(){var t={vaccines:this.vaccinesOrdered,patient:this.$store.state.receptionist.vaccineActivePatient,doctor:{name:this.doctorFullName,email:this.doctorEmail,telephone:this.doctorTelephone},users:[this.$store.state.authentication.currentUser],status:"created",created_at:Date.now(),updated_at:Date.now(),order_time:Date.now(),total_cost:this.calculateTotalCost(this.orderedExams),key:Object(v["g"])(),type:"labrequest"};this.validateOrder()&&(this.$socket.emit("create-labrequest",t),this.closeModal(),this.refreshForm())},addVaccine:function(t){t&&this.vaccinesOrdered.push(t.vaccine)},removeVaccine:function(t){for(var e=-1,a=0;a<this.vaccinesOrdered.length;a++)this.vaccinesOrdered[a].name===t&&(e=a);-1!=e&&this.vaccinesOrdered.splice(e,1)},calculateTotalCost:function(){if(0===this.vaccinesOrdered.length)return 0;var t=function(t,e){return e.price+t};return this.vaccinesOrdered.reduce(t,0)}},computed:{active:function(){return this.$store.state.receptionist.isCreateVaccineModalOn},isVaccineOrdered:function(){return this.vaccinesOrdered.length>=1},isFormReady:function(){return!this.validateOrder()},vaccineOptions:function(){return this.$store.getters.vaccinesToBeOrdered},patient:function(){return this.$store.state.receptionist.vaccineActivePatient}}},F=w,P=(a("fb30"),Object(l["a"])(F,E,$,!1,null,"c2ae8298",null)),k=P.exports,T={name:"PatientRegistrationComponent",components:{"searchbar-component":u,"createpatient-component":C,"testordering-component":y,"vaccineordering-component":k},created:function(){var t=this.$store.state.authentication.inMemoryToken;this.$store.dispatch("fetchPatients",t);var e=this.$store;this.$socket.on("create-patient",(function(t){e.dispatch("addNewPatient",t)}))},methods:{createPatient:function(){this.$store.dispatch("toggleCreatePatientModalOn",!0)},updateIsActive:function(t){},activateModal:function(t){this.$store.dispatch("toggleCreateTestModalOn",!0),this.$store.dispatch("updateActivePatient",t)},activateVaccineModal:function(t){this.$store.dispatch("toggleCreateVaccineModalOn",!0),this.$store.dispatch("updateVaccineActivePatient",t)}},computed:{patients:function(){return this.$store.state.receptionist.patients}}},V=T,M=Object(l["a"])(V,s,i,!1,null,null,null);e["default"]=M.exports},c64e:function(t,e,a){var s=a("e1f4"),i=a("2366");function n(t,e,a){var n=e&&a||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var r=t.random||(t.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var o=0;o<16;++o)e[n+o]=r[o];return e||i(r)}t.exports=n},d97f:function(t,e,a){"use strict";var s=a("5e29"),i=a.n(s);i.a},e1a7:function(t,e,a){"use strict";a.d(e,"g",(function(){return n})),a.d(e,"f",(function(){return r})),a.d(e,"e",(function(){return c})),a.d(e,"c",(function(){return l})),a.d(e,"a",(function(){return d})),a.d(e,"d",(function(){return o})),a.d(e,"b",(function(){return u}));var s=a("c64e"),i=a.n(s),n=function(){return i()()},r=function(t){return t.active_discounts.length<=0?0:t.active_discounts.reduce((function(t,e){return t+e}),0)},o=function(t){var e=t.exams?t.exams:t.vaccines;return e?e.reduce((function(t,e){return t+parseFloat(r(e))}),0).toFixed(2):0},c=function(t){var e=t.exams?t.exams:t.vaccines;return e?e.reduce((function(t,e){return t+e.price}),0):0},l=function(t){return(c(t)-o(t)).toFixed(2)},d=function(t,e){return(t/100*l(e)).toFixed(2)},u=function(t,e){return(parseFloat(l(e))+parseFloat(d(t,e))).toFixed(2)}},e1f4:function(t,e){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var s=new Uint8Array(16);t.exports=function(){return a(s),s}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},fb30:function(t,e,a){"use strict";var s=a("80ed"),i=a.n(s);i.a}}]);
//# sourceMappingURL=patientregistration.8ab1fb40.js.map