(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["partnerlabrequests"],{2366:function(t,e){for(var a=[],s=0;s<256;++s)a[s]=(s+256).toString(16).substr(1);function n(t,e){var s=e||0,n=a;return[n[t[s++]],n[t[s++]],n[t[s++]],n[t[s++]],"-",n[t[s++]],n[t[s++]],"-",n[t[s++]],n[t[s++]],"-",n[t[s++]],n[t[s++]],"-",n[t[s++]],n[t[s++]],n[t[s++]],n[t[s++]],n[t[s++]],n[t[s++]]].join("")}t.exports=n},"28a4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"level"},[a("div",{staticClass:"level-left"},[a("button",{staticClass:"button is-link",on:{click:t.toggleCreateTestModal}},[t._m(0),a("span",[t._v("Create lab request")])])]),a("partnerpatientresultsearch-component")],1),a("table",{staticClass:"table is-fullwidth"},[t._m(1),a("tbody",t._l(t.labRequests,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(t.formatTime(e.order_time)))]),a("td",{staticClass:"is-capitalized"},[t._v("\n          "+t._s(e.patient.first_name+" "+e.patient.last_name)+"\n        ")]),a("td",{staticClass:"is-capitalized",class:{"has-text-success":t.isSent(e.status)}},[t._v("\n          "+t._s(t.status(e))+"\n        ")]),a("td",[a("button",{staticClass:"button is-link",on:{click:function(a){return t.view(e)}}},[t._v("\n            View request\n          ")])])])})),0)]),a("partnerlabrequestform-component"),a("partnerlabrequestmodal-component")],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-plus"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Time")]),a("th",[t._v("Customer")]),a("th",[t._v("Status")]),a("th",[t._v("Action")])])])}],i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"level-right"},[a("div",{staticClass:"field has-addons"},[a("p",{staticClass:"control"},[a("span",{staticClass:"select"},[a("select",[a("option",{attrs:{selected:"",disabled:""}},[t._v("Search By")]),a("option",[t._v("Fist Name")]),a("option",[t._v("Last Name")]),a("option",[t._v("Email")]),a("option",[t._v("Phone Number")])])])]),a("p",{staticClass:"control is-expanded"},[a("input",{staticClass:"input",attrs:{type:"text",placeholder:"Find a patient record..."}})]),a("p",{staticClass:"control"},[a("a",{staticClass:"button is-link"},[t._v("Search")])])])])}],l={name:"PartnerPatientResultSearchComponent"},o=l,c=a("2877"),d=Object(c["a"])(o,i,r,!1,null,null,null),u=d.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal",class:{"is-active":t.active}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v("Order Test(s)")]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.closeModal}})]),a("section",{staticClass:"modal-card-body"},[a("div",[a("div",{staticClass:"card"},[t._m(0),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("div",{staticClass:"field is-grouped is-grouped-multiline"},[a("div",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"input",attrs:{type:"text",placeholder:"First Name",required:""},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}})]),a("div",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"input",attrs:{type:"text",placeholder:"Last Name",required:""},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control has-icons-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{type:"email",placeholder:"Email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._m(1)])]),a("div",{staticClass:"field is-expanded"},[a("div",{staticClass:"field has-addons"},[t._m(2),a("p",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.telephone,expression:"telephone"}],staticClass:"input",attrs:{type:"tel",placeholder:"Phone Number",required:""},domProps:{value:t.telephone},on:{input:function(e){e.target.composing||(t.telephone=e.target.value)}}})])])]),a("div",{staticClass:"field is-grouped is-grouped-multiline"},[a("div",{staticClass:"control"},[a("div",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.sex,expression:"sex"}],attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sex=e.target.multiple?a:a[0]}}},[a("option",{attrs:{selected:"",disabled:"",value:""}},[t._v("Sex")]),a("option",[t._v("Male")]),a("option",[t._v("Female")])])])]),a("div",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.age,expression:"age"}],staticClass:"input",attrs:{type:"number",placeholder:"Age",number:"",required:""},domProps:{value:t.age},on:{input:function(e){e.target.composing||(t.age=e.target.value)}}})])])])])]),a("div",{staticClass:"card",staticStyle:{"margin-top":"1em"}},[t._m(3),a("div",{staticClass:"card-content"},[a("div",{staticClass:"content"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.doctorFullName,expression:"doctorFullName"}],staticClass:"input",attrs:{type:"text",placeholder:"Full Name"},domProps:{value:t.doctorFullName},on:{input:function(e){e.target.composing||(t.doctorFullName=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.doctorEmail,expression:"doctorEmail"}],staticClass:"input",attrs:{type:"email",placeholder:"Email"},domProps:{value:t.doctorEmail},on:{input:function(e){e.target.composing||(t.doctorEmail=e.target.value)}}})])]),a("div",{staticClass:"field is-expanded"},[a("div",{staticClass:"field has-addons"},[t._m(4),a("p",{staticClass:"control is-expanded"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.doctorTelephone,expression:"doctorTelephone"}],staticClass:"input",attrs:{type:"tel",placeholder:"Phone Number",required:""},domProps:{value:t.doctorTelephone},on:{input:function(e){e.target.composing||(t.doctorTelephone=e.target.value)}}})])])])])])]),a("div",{staticClass:"card",staticStyle:{"margin-top":"1em","margin-bottom":"1em"}},[t._m(5),a("div",{staticClass:"card-content"},[a("div",{staticClass:"card"},[t._m(6),a("div",{staticClass:"card-content"},[a("v-select",{attrs:{options:t.examOptions},on:{input:t.selectExam},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)]),a("div",{staticClass:"card",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"card-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isTestOrdered,expression:"isTestOrdered"}]},[a("table",{staticClass:"table is-fullwidth"},[t._m(7),a("tbody",[t._l(t.orderedExams,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.name))]),a("td",[a("button",{staticClass:"button is-link",on:{click:function(a){return t.removeExam(e.name)}}},[t._m(8,!0)])]),a("td",[t._v(t._s(e.price))])])})),a("tr",[t._m(9),a("td"),a("td",[a("strong",[t._v(t._s(t.total))])])])],2)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isTestOrdered,expression:"!isTestOrdered"}]},[a("strong",[t._v("No Test Has Been Selected")])])])])])]),a("div",{staticStyle:{"margin-top":"1 em","margin-bottom":"1em"}},[a("button",{staticClass:"button is-link is-fullwidth is-large",attrs:{disabled:t.isFormReady},on:{click:t.submitOrder}},[t._v("\n            Submit\n          ")])])])])])])},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v("Patient's Details:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small is-left"},[a("i",{staticClass:"fas fa-envelope"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"control"},[a("a",{staticClass:"button is-static"},[t._v("\n                      +237\n                    ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v("Doctor's Details:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"control"},[a("a",{staticClass:"button is-static"},[t._v("+237")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v("Test(s) Details:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"card-header"},[a("p",{staticClass:"card-header-title"},[t._v("Test Selection:")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Test Name")]),a("th",[t._v("Remove")]),a("th",[t._v("Price")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"far fa-trash-alt"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("strong",[t._v("Total")])])}],v=(a("7f7f"),a("e1a7")),h={name:"TestOrderingComponent",data:function(){return{firstName:null,lastName:null,email:null,telephone:null,sex:"",age:null,doctorFullName:null,doctorEmail:null,doctorTelephone:null,exams:[],orderedExams:[],selected:""}},created:function(){this.$store.dispatch("fetchExams",this.$store.state.authentication.inMemoryToken)},methods:{closeModal:function(){this.$store.dispatch("toggleCreatePartnerTestModalOn",!1)},validateOrder:function(){return this.doctorFullName&&this.doctorEmail&&this.doctorTelephone&&this.isTestOrdered},refreshForm:function(){this.firstName=null,this.lastName=null,this.email=null,this.telephone=null,this.sex="",this.age=null,this.doctorFullName=null,this.doctorEmail=null,this.doctorTelephone=null,this.exams=[],this.orderedExams=[],this.selected=""},submitOrder:function(){var t={exams:this.orderedExams,patient:{first_name:this.firstName,last_name:this.lastName,sex:this.sex,age:this.age,telephone:this.telephone,email:this.email},doctor:{name:this.doctorFullName,email:this.doctorEmail,telephone:this.doctorTelephone},partner_lab:this.$store.state.authentication.currentUser.partnerlab,users:[this.$store.state.authentication.currentUser],status:"partner_created",created_at:Date.now(),updated_at:Date.now(),order_time:Date.now(),key:Object(v["g"])(),type:"labrequest"};t.total_cost=Object(v["c"])(t),this.validateOrder()&&(this.$socket.emit("create-labrequest",t),this.$store.dispatch("addLabRequest",t),this.closeModal(),this.refreshForm())},selectExam:function(t){t&&this.orderedExams.push(t.exam)},removeExam:function(t){for(var e=-1,a=0;a<this.orderedExams.length;a++)this.orderedExams[a].name===t&&(e=a);-1!=e&&this.orderedExams.splice(e,1)}},computed:{active:function(){return this.$store.state.partner.isCreateTestModalOn},isTestOrdered:function(){return this.orderedExams.length>=1},total:function(){if(0===this.orderedExams.length)return 0;var t=function(t,e){return parseInt(e.price)+t};return this.orderedExams.reduce(t,0)},isFormReady:function(){return!this.validateOrder()},examOptions:function(){return this.$store.getters.examsToBeOrdered}}},f=h,_=(a("7509"),Object(c["a"])(f,m,p,!1,null,"7b7b187a",null)),C=_.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.labRequest?a("div",{staticClass:"modal",class:{"is-active":t.active}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title is-capitalized"},[t._v("\n        "+t._s(t.labRequest.patient.first_name+" "+t.labRequest.patient.last_name+"'s ")+"Lab request\n      ")]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.closeModal}})]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"box"},[a("p",{staticClass:"title"},[t._v("Customer")]),a("p",{staticClass:"is-capitalized"},[a("strong",[t._v("Name: ")]),t._v("\n          "+t._s(t.labRequest.patient.first_name+" "+t.labRequest.patient.last_name)+"\n        ")]),a("p",[a("strong",[t._v("Email: ")]),t._v("\n          "+t._s(t.labRequest.patient.email)+"\n        ")]),a("p",[a("strong",[t._v("Telephone: ")]),t._v("\n          "+t._s(t.labRequest.patient.telephone)+"\n        ")]),a("p",[a("strong",[t._v("Age: ")]),t._v("\n          "+t._s(t.labRequest.patient.age)+"\n        ")]),a("p",[a("strong",[t._v("Sex: ")]),t._v("\n          "+t._s(t.labRequest.patient.sex)+"\n        ")])]),a("div",{staticClass:"box"},[a("p",{staticClass:"title"},[t._v("Doctor")]),a("p",[a("strong",[t._v("Name: ")]),t._v("\n          "+t._s(t.labRequest.doctor.name)+"\n        ")]),a("p",[a("strong",[t._v("Email: ")]),t._v("\n          "+t._s(t.labRequest.doctor.email)+"\n        ")]),a("p",[a("strong",[t._v("Telephone: ")]),t._v("\n          "+t._s(t.labRequest.doctor.telephone)+"\n        ")])]),a("div",{staticClass:"box"},[a("p",{staticClass:"title"},[t._v("Exams")]),a("table",{staticClass:"table is-fullwidth"},[t._m(0),a("tbody",[t._l(t.labRequest.exams,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.price))])])})),a("tr",[t._m(1),a("td",[a("strong",[t._v(t._s(t.total(t.labRequest)))])])])],2)])]),a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control is-expanded"},[a("button",{staticClass:"button is-link is-medium is-fullwidth",attrs:{disabled:t.isSent(t.labRequest)},on:{click:function(e){return t.send(t.labRequest)}}},[t._v("\n            Send\n          ")])]),a("p",{staticClass:"control is-expanded"},[a("button",{staticClass:"button is-danger is-medium is-fullwidth",on:{click:function(e){return t.remove(t.labRequest)}}},[t._m(2),a("span",[t._v("Delete")])])])])])])]):t._e()},g=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th"),a("th",[t._v("Name")]),a("th",[t._v("Price")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",{attrs:{colspan:"2"}},[a("strong",[t._v("Total")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon is-small"},[a("i",{staticClass:"far fa-trash-alt"})])}],x={name:"PartnerLabRequestModalComponent",methods:{closeModal:function(){this.$store.dispatch("togglePartnerLabRequestModal",!1),this.$store.dispatch("updatePartnerActiveLabRequest",null)},total:function(t){return Object(v["c"])(t)},send:function(t){t.status="created",this.$socket.emit("update-labrequest",t),this.closeModal()},remove:function(t){},isSent:function(t){return"created"===t.status}},computed:{active:function(){return this.$store.state.partner.isLabRequestModalOn},labRequest:function(){return this.$store.state.partner.activeLabRequest}}},E=x,q=Object(c["a"])(E,b,g,!1,null,null,null),y=q.exports,N={name:"PartnerLabRequestsComponent",components:{"partnerpatientresultsearch-component":u,"partnerlabrequestform-component":C,"partnerlabrequestmodal-component":y},methods:{formatTime:function(t){var e=new Date(t);return e.toLocaleString()},toggleCreateTestModal:function(){this.$store.dispatch("toggleCreatePartnerTestModalOn",!0)},isSent:function(t){return"created"===t},status:function(t){return this.isSent(t.status)?"Sent":"Created"},view:function(t){this.$store.dispatch("updatePartnerActiveLabRequest",t),this.$store.dispatch("togglePartnerLabRequestModal",!0)}},created:function(){var t=this.$store.state.authentication.inMemoryToken,e=this.$store.state.authentication.currentUser.partnerlab;this.$store.dispatch("fetchPartnerLabRequests",{token:t,partnerlab:e})},computed:{labRequests:function(){return this.$store.state.partner.labRequests}}},$=N,w=Object(c["a"])($,s,n,!1,null,null,null);e["default"]=w.exports},7509:function(t,e,a){"use strict";var s=a("d51b"),n=a.n(s);n.a},c64e:function(t,e,a){var s=a("e1f4"),n=a("2366");function i(t,e,a){var i=e&&a||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var r=t.random||(t.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var l=0;l<16;++l)e[i+l]=r[l];return e||n(r)}t.exports=i},d51b:function(t,e,a){},e1a7:function(t,e,a){"use strict";a.d(e,"g",(function(){return i})),a.d(e,"f",(function(){return r})),a.d(e,"e",(function(){return o})),a.d(e,"c",(function(){return c})),a.d(e,"a",(function(){return d})),a.d(e,"d",(function(){return l})),a.d(e,"b",(function(){return u}));var s=a("c64e"),n=a.n(s),i=function(){return n()()},r=function(t){return t.active_discounts.length<=0?0:t.active_discounts.reduce((function(t,e){return t+e}),0)},l=function(t){var e=t.exams?t.exams:t.vaccines;return e?e.reduce((function(t,e){return t+parseFloat(r(e))}),0).toFixed(2):0},o=function(t){var e=t.exams?t.exams:t.vaccines;return e?e.reduce((function(t,e){return t+e.price}),0):0},c=function(t){return(o(t)-l(t)).toFixed(2)},d=function(t,e){return(t/100*c(e)).toFixed(2)},u=function(t,e){return(parseFloat(c(e))+parseFloat(d(t,e))).toFixed(2)}},e1f4:function(t,e){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var s=new Uint8Array(16);t.exports=function(){return a(s),s}}else{var n=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n}}}}]);
//# sourceMappingURL=partnerlabrequests.8bddc9bd.js.map