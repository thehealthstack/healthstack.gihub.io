(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["examregistration"],{1507:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"column"},[a("div",{staticClass:"level"},[a("button",{staticClass:"button is-link",on:{click:t.activateExamModal}},[t._m(0),a("span",[t._v("Create exam")])]),a("examsearch-component")],1),a("examlistingtable-component")],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon"},[a("i",{staticClass:"fas fa-plus"})])}],n=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"field has-addons"},[a("p",{staticClass:"control"},[a("span",{staticClass:"select"},[a("select",[a("option",{attrs:{selected:"",disabled:""}},[t._v("Search By")]),a("option",[t._v("Exam ID")]),a("option",[t._v("Exam Name")])])])]),a("p",{staticClass:"control is-expanded"},[a("input",{staticClass:"input",attrs:{type:"text",placeholder:"Find an Exam..."}})]),a("p",{staticClass:"control"},[a("a",{staticClass:"button is-link"},[t._v("Search")])])])])}],l={name:"ExamSearchComponent"},o=l,c=a("2877"),d=Object(c["a"])(o,n,r,!1,null,null,null),u=d.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("table",{staticClass:"table is-fullwidth"},[t._m(0),a("tbody",t._l(t.exams,(function(e,s){return a("tr",{key:s,attrs:{exam:e}},[a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.aliases.map((function(t){return t.value})).join(", ")))]),a("td",{staticClass:"is-capitalized"},[t._v(t._s(e.department.name))]),a("td",[t._v(t._s(e.price))]),a("td",[a("a",{staticClass:"button is-link",on:{click:function(a){return t.edit(e)}}},[t._m(1,!0),a("span",[t._v("\n              Edit\n            ")])])])])})),0)]),a("examcreateform-component"),a("exameditform-component")],1)},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Name")]),a("th",[t._v("Aliases")]),a("th",[t._v("Department")]),a("th",[t._v("Price")]),a("th",[t._v("Action")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"icon"},[a("i",{staticClass:"far fa-edit"})])}],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal",class:{"is-active":t.isActive}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v("Create Exam")]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.closeModal}})]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.fields.name,expression:"fields.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Exam Name"},domProps:{value:t.fields.name},on:{input:function(e){e.target.composing||t.$set(t.fields,"name",e.target.value)}}})])]),t._l(t.fields.aliases,(function(e,s){return a("div",{key:"A"+s,staticClass:"field"},[a("div",{staticClass:"control"},[a("div",{staticClass:"level"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"alias.value"}],staticClass:"input",attrs:{type:"text",placeholder:"Alias"},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}}),0===s?a("span",{staticClass:"icon has-text-danger",on:{click:t.removeAliasField}},[a("i",{staticClass:"fas fa-minus-circle"})]):t._e(),0===s?a("span",{staticClass:"icon has-text-link",on:{click:t.addAliasField}},[a("i",{staticClass:"fa fa-plus-circle"})]):t._e()])])])})),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.fields.price,expression:"fields.price",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",placeholder:"Price"},domProps:{value:t.fields.price},on:{input:function(e){e.target.composing||t.$set(t.fields,"price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.fields.department,expression:"fields.department"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.fields,"department",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Select department")]),t._l(t.examDepartments,(function(e,s){return a("option",{key:s,domProps:{value:e}},[t._v(t._s(e.name)+"\n            ")])}))],2)])]),t._l(t.fields.parameters,(function(e,s){return a("div",{key:"P"+s,staticClass:"field is-horizontal"},[a("div",{staticClass:"field-body"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"parameter.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Exam Parameter"},domProps:{value:e.name},on:{input:function(a){a.target.composing||t.$set(e,"name",a.target.value)}}})])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.unit,expression:"parameter.unit"}],staticClass:"input",attrs:{type:"text",placeholder:"Parameter Unit"},domProps:{value:e.unit},on:{input:function(a){a.target.composing||t.$set(e,"unit",a.target.value)}}})])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formula,expression:"parameter.formula"}],staticClass:"input",attrs:{type:"text",placeholder:"Parameter Formula"},domProps:{value:e.formula},on:{input:function(a){a.target.composing||t.$set(e,"formula",a.target.value)}}})])]),0===s?a("div",{staticClass:"field"},[a("span",{staticClass:"icon has-text-danger",on:{click:t.removeParameterField}},[a("i",{staticClass:"fas fa-minus-circle"})])]):t._e(),0===s?a("div",{staticClass:"field"},[a("span",{staticClass:"icon has-text-link",on:{click:t.addParameterField}},[a("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})])]):t._e()])])})),a("div",{staticStyle:{"padding-top":"1 em"}},[a("button",{staticClass:"button is-link is-fullwidth is-medium",on:{click:t.createExam}},[t._v("\n          Create\n        ")])])],2)])])},f=[],x=a("e1a7"),h={name:"ExamCreateFormComponent",data:function(){return{examDepartments:[{name:"parasitology"},{name:"virology"},{name:"hematology"}],fields:{name:"",aliases:[{value:""}],price:"",department:"",parameters:[{name:"",unit:"",parameter_formula:""}]}}},methods:{createExam:function(){if(this.validateForm()){var t=this.fields;t.aliases=t.aliases,t.price=t.price,t.cost=t.price,t.discounts=[],t.active_discounts=[],t.is_complete=!1,t.is_sample_collected=!1,t.created_at=Date.now(),t.updated_at=Date.now(),t.type="exam",t.key=Object(x["g"])(),this.$socket.emit("create-exam",t),this.closeModal()}},validateForm:function(){return!0},refreshForm:function(){this.fields={name:"",aliases:[{value:""}],price:"",department:"",parameters:[{name:"",unit:"",parameter_formula:""}]}},closeModal:function(){this.refreshForm(),this.$store.dispatch("toggleCreateExamModalOn",!1)},addAliasField:function(){this.fields.aliases.push({value:""})},removeAliasField:function(){this.fields.aliases.length>1&&this.fields.aliases.pop()},removeParameterField:function(){this.fields.parameters.length>1&&this.fields.parameters.pop()},addParameterField:function(){this.fields.parameters.push({name:"",unit:"",computed:""})}},computed:{isActive:function(){return this.$store.state.labtech.isCreateExamModalOn}}},C=h,g=Object(c["a"])(C,v,f,!1,null,null,null),_=g.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isActive?a("div",{staticClass:"modal",class:{"is-active":t.isActive}},[a("div",{staticClass:"modal-background"}),a("div",{staticClass:"modal-card"},[a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v("Exam form")]),a("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:t.closeModal}})]),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.exam.name,expression:"exam.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Exam Name"},domProps:{value:t.exam.name},on:{input:function(e){e.target.composing||t.$set(t.exam,"name",e.target.value)}}})])]),t._l(t.exam.aliases,(function(e,s){return a("div",{key:"A"+s,staticClass:"field"},[a("div",{staticClass:"control"},[a("div",{staticClass:"level"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"alias.value"}],staticClass:"input",attrs:{type:"text",placeholder:"Alias"},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}}),0===s?a("span",{staticClass:"icon has-text-danger",on:{click:function(e){return t.removeAlias(t.exam)}}},[a("i",{staticClass:"fas fa-minus-circle"})]):t._e(),0===s?a("span",{staticClass:"icon has-text-link",on:{click:function(e){return t.addAlias(t.exam)}}},[a("i",{staticClass:"fa fa-plus-circle"})]):t._e()])])])})),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.exam.price,expression:"exam.price",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",placeholder:"Price"},domProps:{value:t.exam.price},on:{input:function(e){e.target.composing||t.$set(t.exam,"price",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.exam.department,expression:"exam.department"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.exam,"department",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Select department")]),t._l(t.examDepartments,(function(e,s){return a("option",{key:s,domProps:{value:e}},[t._v(t._s(e.name)+"\n            ")])}))],2)])]),t._l(t.exam.parameters,(function(e,s){return a("div",{key:"P"+s,staticClass:"field is-horizontal"},[a("div",{staticClass:"field-body"},[a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"parameter.name"}],staticClass:"input",attrs:{type:"text",placeholder:"Exam Parameter"},domProps:{value:e.name},on:{input:function(a){a.target.composing||t.$set(e,"name",a.target.value)}}})])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.unit,expression:"parameter.unit"}],staticClass:"input",attrs:{type:"text",placeholder:"Parameter Unit"},domProps:{value:e.unit},on:{input:function(a){a.target.composing||t.$set(e,"unit",a.target.value)}}})])]),a("div",{staticClass:"field"},[a("div",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.formula,expression:"parameter.formula"}],staticClass:"input",attrs:{type:"text",placeholder:"Parameter Formula"},domProps:{value:e.formula},on:{input:function(a){a.target.composing||t.$set(e,"formula",a.target.value)}}})])]),0===s?a("div",{staticClass:"field"},[a("span",{staticClass:"icon has-text-danger",on:{click:function(e){return t.removeParameter(t.exam)}}},[a("i",{staticClass:"fas fa-minus-circle"})])]):t._e(),0===s?a("div",{staticClass:"field"},[a("span",{staticClass:"icon has-text-link",on:{click:function(e){return t.addParameter(t.exam)}}},[a("i",{staticClass:"fa fa-plus-circle",attrs:{"aria-hidden":"true"}})])]):t._e()])])})),a("div",{staticStyle:{"padding-top":"1 em"}},[a("button",{staticClass:"button is-link is-fullwidth is-medium",on:{click:function(e){return t.update(t.exam)}}},[t._v("\n          Save\n        ")])])],2)])]):t._e()},b=[],E={name:"ExamEditFormComponent",data:function(){return{examDepartments:[{name:"parasitology"},{name:"virology"},{name:"hematology"}]}},methods:{validateForm:function(){return!0},update:function(t){this.$socket.emit("update-exam",t),this.closeModal()},populateExamModal:function(t){this.fields=t},closeModal:function(){this.$store.dispatch("updateActiveExam",null),this.$store.dispatch("toggleEditExamModalOn",!1)},addAlias:function(t){t.aliases.push({value:""})},removeAlias:function(t){t.aliases.length>=1&&t.aliases.pop()},removeParameter:function(t){t.parameters.length>1&&t.parameters.pop()},addParameter:function(t){t.parameters.push({name:"",unit:"",computed:""})}},computed:{isActive:function(){return this.$store.state.labtech.isEditExamModalOn},exam:function(){return this.$store.state.labtech.activeExam}}},$=E,k=Object(c["a"])($,y,b,!1,null,null,null),P=k.exports,w={name:"ExamListingTableComponent",created:function(){this.$store.dispatch("fetchLabtechExams",this.$store.state.authentication.inMemoryToken);var t=this.$store;this.$socket.on("create-exam",(function(e){t.dispatch("addCreatedExam",e)}))},methods:{edit:function(t){this.$store.dispatch("updateActiveExam",t),this.$store.dispatch("toggleEditExamModalOn",!0)}},computed:{exams:function(){return this.$store.state.labtech.exams}},components:{"examcreateform-component":_,"exameditform-component":P}},A=w,F=Object(c["a"])(A,m,p,!1,null,null,null),N=F.exports,M={name:"ExamRegistrationComponent",components:{"examsearch-component":u,"examlistingtable-component":N},methods:{activateExamModal:function(){this.$store.dispatch("toggleCreateExamModalOn",!0)}}},O=M,S=Object(c["a"])(O,s,i,!1,null,null,null);e["default"]=S.exports},2366:function(t,e){for(var a=[],s=0;s<256;++s)a[s]=(s+256).toString(16).substr(1);function i(t,e){var s=e||0,i=a;return[i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],"-",i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]],i[t[s++]]].join("")}t.exports=i},c64e:function(t,e,a){var s=a("e1f4"),i=a("2366");function n(t,e,a){var n=e&&a||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var r=t.random||(t.rng||s)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var l=0;l<16;++l)e[n+l]=r[l];return e||i(r)}t.exports=n},e1a7:function(t,e,a){"use strict";a.d(e,"g",(function(){return n})),a.d(e,"f",(function(){return r})),a.d(e,"e",(function(){return o})),a.d(e,"c",(function(){return c})),a.d(e,"a",(function(){return d})),a.d(e,"d",(function(){return l})),a.d(e,"b",(function(){return u}));var s=a("c64e"),i=a.n(s),n=function(){return i()()},r=function(t){return t.active_discounts.length<=0?0:t.active_discounts.reduce((function(t,e){return t+e}),0)},l=function(t){var e=t.exams?t.exams:t.vaccines;return e?e.reduce((function(t,e){return t+parseFloat(r(e))}),0).toFixed(2):0},o=function(t){var e=t.exams?t.exams:t.vaccines;return e?e.reduce((function(t,e){return t+e.price}),0):0},c=function(t){return(o(t)-l(t)).toFixed(2)},d=function(t,e){return(t/100*c(e)).toFixed(2)},u=function(t,e){return(parseFloat(c(e))+parseFloat(d(t,e))).toFixed(2)}},e1f4:function(t,e){var a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(a){var s=new Uint8Array(16);t.exports=function(){return a(s),s}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}}}]);
//# sourceMappingURL=examregistration.27ffc87c.js.map